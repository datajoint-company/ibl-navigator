<div *ngIf="cells">
  <h3>Cells</h3>
</div>
<!-- <p>id: {{ clickedClusterId }}</p> -->
<div class="row">
  <!-- <div #clusterListNavPlot class="col-6" (click)="testMethod($event)"></div> -->
  <plotly-plot [data]="plot_data" [layout]="plot_layout" [config]="plot_config" (click)="clusterSelectedPlot($event)"></plotly-plot>
  <div class="plots-navigator">
    <div *ngIf="cells" class="clusterListContainer">
      <table class="table table-sm table-hover col-5 ml-auto clusterListTable" #navTable>
        <thead class="thead-light">
          <th>Cluster ID</th>
          <th>Probe Index</th>
          <th>Cluster Depth</th>
          <th>Cluster Amp</th>
          <th>Details</th>
        </thead>
        <tbody>
          <tr *ngFor="let cl of cells" (click)="clusterSelectedTable(cl.cluster_id)" [ngStyle]="{'backgroundColor': cl?.cluster_id == clickedClusterId ? '#ffe5e5' : ''}">
            <td>{{ cl.cluster_id }}</td>
            <td>{{ cl.probe_idx }}</td>
            <td>{{ cl.cluster_depth }}</td>
            <td>{{ cl.cluster_amp }}</td>
            <td>
              <span class="oi oi-external-link" routerLink="/cell/{{cl?.subject_uuid}}/{{cl?.session_start_time}}/{{cl?.cluster_id}}">
                <div hidden>
                  <td>{{ cl.cluster_id }}</td>
                  <td>{{ cl.probe_idx }}</td>
                  <td>{{ cl.cluster_depth }}</td>
                  <td>{{ cl.cluster_amp }}</td>
                </div>
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="plots-navigator-buttons">
      <h3><span class="oi oi-arrow-circle-top" (click)="navigate_cell_plots($event, 'up')"></span></h3>
      <h3><span class="oi oi-arrow-circle-bottom" (click)="navigate_cell_plots($event, 'down')"></span></h3>
    </div>
  </div>
  <!-- <plotly-plot [data]="plot_data" [layout]="plot_layout" [config]="plot_config" (click)="clusterSelected($event)">
    </plotly-plot> -->
  <!-- <div *ngIf="cells">
    <app-raster-plots [clusterInfo]="cellOnFocus"></app-raster-plots>
  </div> -->
  <div class="rasterPlotSelectors col-8">
    <div class="order-buttons col-4">
      <label for="event">Event</label>
      <select name="event" (change)="order_by_event($event.target.value)">
        <option value="feedback" selected [disabled]="sortType==='response - stim on'">Feedback</option>
        <option value="response" [disabled]="sortType==='feedback - stim on'">Response</option>
        <option value="stim on" [disabled]="sortType==='feedback - response'">Stim On</option>
      </select>
    </div>
    <div class="order-buttons col-4">
      <label for="sort_by">Sort By</label>
      <select name="sort_by" (change)="order_by_sorting($event.target.value)">
        <option value="trial_id" selected>Trial ID</option>
        <option value="feedback - response" [disabled]="eventType==='stim on'">Feedback - Response</option>
        <option value="feedback - stim on" [disabled]="eventType==='response'">Feedback - Stim On</option>
        <option value="response - stim on" [disabled]="eventType==='feedback'">Response - Stim On</option>
      </select>
    </div>
    <div class="order-buttons col-4">
      <label for="probe_idx">Probe Index</label>
      <select name="probe_idx">
        <option value=0 selected>0</option>
      </select>
    </div>
  </div>
  <plotly-plot [data]="raster_data[targetClusterId]" [layout]="raster_layout[targetClusterId]" [config]="raster_config[targetClusterId]"></plotly-plot>
  <plotly-plot [data]="psth_data[targetClusterId]" [layout]="psth_layout[targetClusterId]" [config]="psth_config[targetClusterId]"></plotly-plot>

  <!-- <plotly-plot [data]="psth_data" [layout]="psth_layout" [config]="psth_config"></plotly-plot> -->

  <br>
</div>
